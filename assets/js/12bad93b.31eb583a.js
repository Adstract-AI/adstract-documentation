"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[447],{3022:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"api-ad-injection-start","title":"POST /api/ad-injection/start/","description":"Create an ad request and run the ad injection pipeline.","source":"@site/docs/api-ad-injection-start.md","sourceDirName":".","slug":"/api-ad-injection-start","permalink":"/adstract-documentation/api-ad-injection-start","draft":false,"unlisted":false,"editUrl":"https://github.com/Adstract-AI/adstract-documentation/docs/api-ad-injection-start.md","tags":[],"version":"current","frontMatter":{"title":"POST /api/ad-injection/start/","description":"Create an ad request and run the ad injection pipeline."}}');var i=s(4848),d=s(8453);const c={title:"POST /api/ad-injection/start/",description:"Create an ad request and run the ad injection pipeline."},a=void 0,o={},r=[{value:"Endpoint",id:"endpoint",level:2},{value:"Headers",id:"headers",level:2},{value:"Request body",id:"request-body",level:2},{value:"Successful response (<code>201</code>)",id:"successful-response-201",level:2},{value:"Unsuccessful pipeline output (<code>201</code>)",id:"unsuccessful-pipeline-output-201",level:2},{value:"cURL example",id:"curl-example",level:2},{value:"Notes",id:"notes",level:2}];function l(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Creates an ad request, executes the ad injection pipeline, and returns AEPI output when available."}),"\n",(0,i.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Method: ",(0,i.jsx)(n.code,{children:"POST"})]}),"\n",(0,i.jsxs)(n.li,{children:["Path: ",(0,i.jsx)(n.code,{children:"/api/ad-injection/start/"})]}),"\n",(0,i.jsxs)(n.li,{children:["Content-Type: ",(0,i.jsx)(n.code,{children:"application/json"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"headers",children:"Headers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Required: ",(0,i.jsx)(n.code,{children:"X-Adstract-API-Key"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"request-body",children:"Request body"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "prompt": "How can I improve conversion on my SaaS landing page?",\n  "wrapping_type": "xml",\n  "conversation": {\n    "conversation_id": "conv-123",\n    "session_id": "sess-123",\n    "message_id": "msg_u_123"\n  },\n  "metadata": {\n    "client": {\n      "x_forwarded_for": "203.0.113.10",\n      "device_type": "desktop",\n      "os_family": "windows",\n      "browser_family": "chrome",\n      "sdk_version": "0.0.12"\n    },\n    "geo": {\n      "geo_country": "US",\n      "language": "en"\n    }\n  },\n  "constraints": {\n    "max_ads": 1,\n    "min_similarity_hint": 0.2,\n    "max_latency_ms_hint": 1200,\n    "safe_mode": "standard"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"successful-response-201",children:["Successful response (",(0,i.jsx)(n.code,{children:"201"}),")"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ad_request_id": "ac12d9db-e7f8-42f2-a101-7eed89693c43",\n  "ad_response_id": "ac12d9db-e7f8-42f2-a101-7eed89693c43",\n  "success": true,\n  "execution_time_ms": 1025.65,\n  "aepi": {\n    "status": "ok",\n    "aepi_text": "...enhanced prompt with ad instructions...",\n    "checksum": "3683054a04bcb31e186e9439c6d2d0b0fd36b70c8d53c5ab3e847402418fb688",\n    "size_bytes": 1726\n  },\n  "tracking_url": "https://your-tracking-domain/c/2uuRF2WHizzzYedtMcShvv",\n  "product_name": "Adstract - LLM Advertising",\n  "sponsored_label": "Sponsored",\n  "tracking_identifier": "https://your-tracking-domain/c/2uuRF2WHizzzYedtMcShvv"\n}\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"unsuccessful-pipeline-output-201",children:["Unsuccessful pipeline output (",(0,i.jsx)(n.code,{children:"201"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["The endpoint can still return ",(0,i.jsx)(n.code,{children:"201"})," with ",(0,i.jsx)(n.code,{children:"success: false"})," when processing completes but no valid ad output is produced."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ad_request_id": "ac12d9db-e7f8-42f2-a101-7eed89693c43",\n  "ad_response_id": "ac12d9db-e7f8-42f2-a101-7eed89693c43",\n  "success": false,\n  "execution_time_ms": 845.19,\n  "aepi": null,\n  "tracking_url": null,\n  "product_name": null,\n  "sponsored_label": "Sponsored",\n  "tracking_identifier": null\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"curl-example",children:"cURL example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.adstract.ai/api/ad-injection/start/" \\\n  -H "Content-Type: application/json" \\\n  -H "X-Adstract-API-Key: YOUR_API_KEY" \\\n  -d \'{\n    "prompt": "How do I reduce cloud costs?",\n    "conversation": {\n      "conversation_id": "conv-900",\n      "session_id": "sess-900",\n      "message_id": "msg_u_900"\n    },\n    "wrapping_type": "xml"\n  }\'\n'})}),"\n",(0,i.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"conversation"})," is required."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"wrapping_type"})," defaults to ",(0,i.jsx)(n.code,{children:"xml"})," when omitted."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"metadata"})," and ",(0,i.jsx)(n.code,{children:"constraints"})," are optional, but must follow validation rules when provided."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var t=s(6540);const i={},d=t.createContext(i);function c(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);